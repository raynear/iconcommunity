{% extends 'base.html' %}
{% load static %}
{% block extra_head %}
  <link href="{% static 'dapps/css/dapps.css' %}" rel="stylesheet"/>
  <script>
    var tx_logo_list = {};
    var dapp_logo_list = {};
    var discover_logo_list = {};
  </script>
{% endblock %}
{% block title %}DAPPS{% endblock %}
{% block section %}DAPPS{% endblock %}

{% block content %}

  <!-- TX Challenge -->
  <h3 class="title mt-5">ICON's Got Talent Winners</h3>
  <div class="card-body">
    <div class="row">
      {% for tx_challenge in tx_challenges %}
      <script>tx_logo_list[{{ tx_challenge.id }}] = ["{{ tx_challenge.tx_challenge_logo_w.url }}", "{{ tx_challenge.tx_challenge_logo.url }}"];</script>
      <div class="col-md-4 mt-5 mb-3">
        <a href="{{ tx_challenge.tx_challenge_link }}" target="_blank">
          {% if nightmode == True %}
            <img class="dapplogo" id="tx{{ tx_challenge.id }}" src="{{ tx_challenge.tx_challenge_logo_w.url }}">
          {% else %}
            <img class="dapplogo" id="tx{{ tx_challenge.id }}" src="{{ tx_challenge.tx_challenge_logo.url }}">
          {% endif %}
          <h4><a href="{{ tx_challenge.tx_challenge_link }}" target="_blank">{{ tx_challenge.tx_challenge_title }}</a></h4>
          <h6>{{ tx_challenge.tx_challenge_category }}</h6>
        </a>
        <span class="desc">{{ tx_challenge.tx_challenge_description }}</span>
      </div>
      {% endfor %}
    </div>
  </div>

  <br><br>

  <!-- Official Dapp Partners -->
  <h3 class="title mt-5">Official DApp Partners</h3>
  <div class="card-body">
    <div class="row">
      {% for official_dapp in official_dapps %}
      <script>dapp_logo_list[{{ official_dapp.id }}] = ["{{ official_dapp.official_dapp_logo_w.url }}", "{{ official_dapp.official_dapp_logo.url }}"];</script>
      <div class="col-md-4 mt-5 mb-3">
        <a href="{{ official_dapp.official_dapps_link }}" target="_blank">
          {% if nightmode == True %}
            <img class="dapplogo" id="{{ official_dapp.id }}" src="{{ official_dapp.official_dapp_logo_w.url }}">
          {% else %}
            <img class="dapplogo" id="{{ official_dapp.id }}" src="{{ official_dapp.official_dapp_logo.url }}">
          {% endif %}
          <h4><a href="{{ official_dapp.official_dapp_link }}" target="_blank">{{ official_dapp.official_dapp_title }}</a></h4>
          <h6>{{ official_dapp.official_dapp_category }}</h6>
        </a>
        <span class="desc">{{ official_dapp.official_dapp_description }}</span>
      </div>
      {% endfor %}

    </div>
  </div>

  <br><br>

  <!-- Discover -->
  <h3 class="title mt-5">Discover More DApps</h3>
  <div class="card-body">
    <div class="row">
      {% for discover_more_dapp in discover_more_dapps %}
      <script>discover_logo_list[{{ discover_more_dapp.id }}] = ["{{ discover_more_dapp.discover_logo_w.url }}", "{{ discover_more_dapp.discover_logo.url }}"];</script>
      <div class="col-md-4 mt-5 mb-3">
        <a href="{{ discover_more_dapp.discover_link }}" target="_blank">
          {% if nightmode == True %}
            <img class="dapplogo" id="discover{{ discover_more_dapp.id }}" src="{{ discover_more_dapp.discover_logo_w.url }}">
          {% else %}
            <img class="dapplogo" id="discover{{ discover_more_dapp.id }}" src="{{ discover_more_dapp.discover_logo.url }}">
          {% endif %}
          <h4><a href="{{ discover_more_dapp.discover_link }}" target="_blank">{{ discover_more_dapp.discover_title }}</a></h4>
          <h6>{{ discover_more_dapp.discover_category }}</h6>
        </a>
        <span class="desc">{{ discover_more_dapp.discover_description }}</span>
      </div>
      {% endfor %}

    </div>
  </div>


{% endblock %}

{% block pre_extra_js %}
  <script>
  function morning_image(){
    for(var key in tx_logo_list){
        $('#tx'+key).attr("src", tx_logo_list[key][1])
    }
    for(var key in dapp_logo_list){
        $('#'+key).attr("src", dapp_logo_list[key][1])
    }
    for(var key in discover_logo_list){
        $('#discover'+key).attr("src", discover_logo_list[key][1])
    }
    console.log(discover_logo_list);
  }

  function night_image(){
    for(var key in tx_logo_list){
        $('#tx'+key).attr("src", tx_logo_list[key][0])
    }
    for(var key in dapp_logo_list){
        $('#'+key).attr("src", dapp_logo_list[key][0])
    }
    for(var key in discover_logo_list){
        $('#discover'+key).attr("src", discover_logo_list[key][0])
    }
  }
  </script>
{% endblock %}
